<Window x:Class="PhotoMax.GridSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Grid Settings" 
        Height="540" 
        Width="420"
        WindowStartupLocation="CenterOwner" 
        ResizeMode="NoResize"
        Background="{StaticResource PmWindowBackgroundBrush}"
        Foreground="{StaticResource PmTextBrush}">
    <Grid Margin="20">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                   Text="GRID SETTINGS"
                   FontSize="11"
                   FontWeight="Bold"
                   Foreground="{StaticResource PmSubTextBrush}"
                   Margin="0,0,0,12"/>

        <!-- Preview Section -->
        <TextBlock Grid.Row="1"
                   Text="PREVIEW"
                   FontSize="10"
                   FontWeight="Bold"
                   Foreground="{StaticResource PmSubTextBrush}"
                   Margin="0,0,0,8"/>

        <Border Grid.Row="3" 
                CornerRadius="6" 
                BorderBrush="{StaticResource PmPanelBorderBrush}" 
                BorderThickness="2" 
                Background="#2D2D2D"
                Height="120"
                Padding="0">
            <Grid>
                <Rectangle Fill="#202020"/>
                <Rectangle x:Name="PreviewGrid"/>
                <!-- Preview label -->
                <TextBlock Text="Grid preview"
                           FontSize="10"
                           Foreground="{StaticResource PmSubTextBrush}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Bottom"
                           Margin="0,0,0,8"/>
            </Grid>
        </Border>

        <!-- Controls Section -->
        <TextBlock Grid.Row="5"
                   Text="APPEARANCE"
                   FontSize="10"
                   FontWeight="Bold"
                   Foreground="{StaticResource PmSubTextBrush}"
                   Margin="0,0,0,8"/>

        <StackPanel Grid.Row="7">
            <!-- Color Button -->
            <Button Content="🎨 Choose Grid Color..."
                    Padding="12,8"
                    HorizontalAlignment="Stretch"
                    Margin="0,0,0,12"
                    Click="ChangeColor_Click"
                    ToolTip="Pick a color for the grid lines"/>

            <!-- Opacity Control -->
            <TextBlock Text="Opacity"
                       FontSize="11"
                       Foreground="{StaticResource PmTextBrush}"
                       Margin="0,0,0,6"/>

            <Grid Margin="0,0,0,12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="60"/>
                </Grid.ColumnDefinitions>

                <Slider x:Name="OpacitySlider" 
                        Grid.Column="0"
                        Minimum="0" 
                        Maximum="100" 
                        TickFrequency="5"
                        IsSnapToTickEnabled="False" 
                        ValueChanged="OpacitySlider_ValueChanged"
                        VerticalAlignment="Center"
                        Margin="0,0,8,0"/>

                <TextBox x:Name="OpacityTextBox"
                         Grid.Column="1"
                         Width="60"
                         Padding="6,4"
                         VerticalContentAlignment="Center"
                         TextAlignment="Center"
                         Background="{StaticResource PmPanelBackgroundBrush}"
                         Foreground="{StaticResource PmTextBrush}"
                         BorderBrush="{StaticResource PmPanelBorderBrush}"
                         PreviewTextInput="OpacityTextBox_PreviewTextInput"
                         TextChanged="OpacityTextBox_TextChanged"/>
            </Grid>

            <TextBlock x:Name="OpacityLabel"
                       FontSize="10"
                       Foreground="{StaticResource PmSubTextBrush}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,0"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel Grid.Row="8" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,20,0,0">
            <Button Content="✓ OK" 
                    Width="100" 
                    Padding="12,8"
                    Margin="0,0,8,0" 
                    IsDefault="True" 
                    Click="Ok_Click"
                    Background="#2D5A2D"
                    BorderThickness="0"/>
            <Button Content="✕ Cancel" 
                    Width="100" 
                    Padding="12,8"
                    IsCancel="True"
                    Background="#5A2D2D"
                    BorderThickness="0"/>
        </StackPanel>
    </Grid>
</Window>